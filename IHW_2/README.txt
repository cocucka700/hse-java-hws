Require считываются только, если они написаны на отдельной строке.

Программа корректно обрабатывает зависимости только .txt файлов.

В разные дни и состояния садился за код, поэтому прошу прощения, если будет много логических ошибок.

Если в одном из файлов прописан несуществующий require, то программа завершает выполнение.